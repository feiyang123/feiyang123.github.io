<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>部署方式-互联网部署</title>
<meta name="keywords" content="WEB测试模块" />
<meta name="description" content="WEB测试模块" />
<link rel="shortcut icon" type="image/x-icon" href="../../images/up_images/desktop.ico" media="screen" />
<link href="../../css/Netbeike4.3/inner.css" rel="stylesheet" type="text/css" />
<link href="../../css/Netbeike4.3/common.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../js/functions.js"></script>
<script type="text/javascript" src="../../images/iepng/iepngfix_tilebg.js"></script>
<style type="text/css">
<!--
.STYLE1 {font-size: 14px}
.STYLE2 {font-size: 16px}
.STYLE4 {font-size: 14px; font-weight: bold; }
-->
</style>
</head>

<body>
<div id="wrapper">

<!--head start-->
<div id="head">

<!--top start -->
<div class="top">
<div class="TopInfo"><div class="link">词条：<a href="http://baike.baidu.com/link?url=3jW4cI6szkumjTW6ITr4e71_taQQ6m5rN7DeQ-M9OBG7issTGyPoYC8QMRdgprj3l2IEmBg05Jm-rEHe5IGrP_" target="_blank">Phoenix Framework</a></div>
</div>
<div class="clearfix"></div>
<div class="TopLogo">
<div class="logo"><a href="/"><img src="../../images/up_images/LOGO.png" alt="Phoenix Framework"></a></div>
<div class="tel">
<p class="telW">联系方式</p>
<p class="telN">5156meng.feiyang@163.com</p>
</div>
</div>

</div>
<!--top end-->

<!--nav start-->
<div id="NavLink">
<div class="NavBG">
<!--Head Menu Start-->
<script src='../../ADs/headmenu.js' charset='gbk' type='text/javascript'></script>
<!--Head Menu End-->
</div>
<div class="clearfix"></div>
</div>
<!--nav end-->

</div>
<!--head end-->
<!--body start-->
<div id="body">
<!--focus start-->
<div id="InnerBanner">
<script src='../../ADs/113.js' type='text/javascript'></script>
</div>
<!--foncus end-->
<div class="HeightTab clearfix"></div>
<!--inner start -->
<div class="inner">
<!--left start-->
<div class="left">
<div class="Sbox">
<div class="topic">部署方式   Deploy</div>
<div class="blank"><ul>
<li><A href='../../about/deploy/normaldeploy.html'>经典部署方式</A></li> 
<li class='current'><A href='../../about/deploy/normaldeploy.html'>互联网部署方式</A></li> 

</ul></div>
</div>
<div class="HeightTab clearfix"></div>
<div class="Sbox">
<div class="list">

</div>

</div>
<div class="HeightTab clearfix"></div>
<div class="Sbox">
<div class="topic">联系我们   Contact</div>
<div class="txt ColorLink">
<script src='../../ads/content.js' charset='gbk' type='text/javascript'></script>
<p align='center'>
<a target="blank" href="http://wpa.qq.com/msgrd?v=3&uin=296595606&site=qq&menu=yes"><img border="0" src="http://wpa.qq.com/pa?p=2:296595606:41" alt="点击这里给我发消息" title="点击这里给我发消息" align="absmiddle"/></a>

<a target="blank" href="http://wpa.qq.com/msgrd?V=1&Uin=873146554&Site=qq&Menu=yes"><img border="0" SRC=http://wpa.qq.com/pa?p=1:873146554:41 alt="点击这里给我发消息" title="点击这里给我发消息" align="absmiddle"></a>
 </p></div>
</div>

<div class="HeightTab clearfix"></div>
<div class="Sbox">
<div class="topic">&nbsp;</div>
<div class="SearchBar">

</div>
</div>
</div>
<!--left end-->
<!--right start-->
<div class="right">
<div class="Position"><span>你的位置：<a href="/">首页</a> > <a href='/about/deploy/'>部署方式</a> > <a href='/about/deploy/internetdeploy.html'>互联网部署方式</a></span></div>
<div class="HeightTab clearfix"></div>
<!--main start-->
<div class="main">

<!--content start-->
<div class="content">
<div class="maincontent clearfix">
<p align="center">
<p><span class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;互联网部署方式既可以在Linux下部署也可以在Windows平台下部署。但需要程序源代码,可在 <a href="/contact/" target="_blank"><em><strong>联系方式</strong></em></a> 模块联系我。互联网部署方式具有以下特点：</span></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /> 常规策略执行，循环不断的执行数据库中的场景</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /> 优先策略执行，测试人员临时配置的场景优先执行</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /> 可在Tomcat或Weblogic下部署，方便与其他Web系统集成</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /> 双机高可用，一台服务器出现故障后不会影响正常的测试流程</p>
<p><span class="STYLE1">下面详细讲一下该模式的部署结构和架构设计：</span></p>
<div class="IntroTitle clearfix"><h3 class="STYLE8 STYLE2">互联网部署模式说明</h3></div>
<span class="STYLE1">首先看一下整体部署结构：</span>
<p align="center"><img src="../../images/page/wholedeploy.jpg" title="整体部署结构" alt="整体部署结构" border="1" /></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户访问服务端时，前置机会根据相应负载均衡算法分配一台可用机。服务端之间相互可以调用。各个服务器连接同一个数据库集群。本文着重针对服务端结构和执行策略结构设计进行说明，对前置机及数据库集群的部署不做描述。先说一下用户的角色分配。请看下图：</p>
<p align="center"><img src="../../images/page/roles.jpg" border="0" title="角色分配" alt="角色分配"/></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上图显示,用户在系统中主要操作两个接口，即View层与Phoenix Framework服务端。只做3样工作：调试用例、策略配置、维护数据。自动化的其他工作均由系统自动完成。下面我们在看一下该部署模式下服务端的结构设计。</p>
<div class="IntroTitle clearfix"><h3 class="STYLE8 STYLE2">服务端结构设计</h3></div>
<span class="STYLE1">下面是服务端系统结构图：</span>
<p align="center"><img src="../../images/page/serverframe.jpg" title="服务端结构设计" alt="服务端结构设计" /></p>
<p class="STYLE1">技术说明：</p>
<blockquote class="STYLE1">Spring + ibatis + velocity + ajax + phoenixframe + mysql</blockquote><p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;表示层采用velocity，采用ibatis持久化对象，springIOC配置javabean的实际调用，以Spring相关类作为控制器控制页面转发，技术核心为spring MVC。</p><p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以下为一些典型使用场景：</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /><span class="STYLE4">正常启动流程（用户通过浏览器打开改地址时）：</span></p><p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前置机分配请求到View层 --> 用户从View层发出请求 --> Controller层 -->Controller委托模型处理、选择视图并为视图赋值-->将模型推送给view层并同时在库中生成测试Task -->执行中心获取Task进行执行。</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /><strong>自动化控制流程：</strong></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户从View层发出请求 --> Controller层 -->Controller委托模型处理、选择视图并为视图赋值
-->Controller层调用Phoenix Framework用例执行中心 -->从数据库获取执行数据（后续可扩展手动开发的用例) --> 开始执行 -->向Controller发送执行进展及健康状况 及 产生一系列的测试报告（包括向数据库写入的报告信息) --> Controller选择视图 -->View层（用户可以看到执行已经开始了)</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /><strong>自动化监控流程：</strong></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户从View层发出请求 --> Controller层 -->Controller委托模型处理、选择视图并为视图赋值
-->Controller层调用Phoenix Framework用例执行中心 -->从数据库获取执行数据（后续可扩展手动开发的用例) --> 开始执行 -->向Controller发送执行进展及健康状况 --> Controller选择视图 -->View层（用户可以看到执行已经开始了) --> View层的ajax启动（自动或手动） --> 请求Controller --> 请求Phoenix Framework执行中心 -->返回执行进展及健康状况 --> Controller --> View（数据展示）</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /><span class="STYLE4">测试数据维护流程：</span></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户从View层发出数据维护请求 --> Controller层 -->请求Model层数据 -->Controller选择视图，并为视图赋值 -->View层展示 -->修改完成-->调用Controller执行对应组件-->Model层-->dao-->数据写入DB</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /><strong>策略配置流程：</strong></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户从View层发出数据维护请求 --> Controller层 -->请求Model层数据 -->Controller选择视图，并为视图赋值 -->View层展示 -->修改或新增策略（优先级比常规策略高）-->调用Controller执行对应组件-->Model层-->dao-->数据写入Task表。该过程的活动图如下：</p><p align="center"><img src="../../images/page/strategyConfig.jpg" alt="执行策略配置" title="执行策略配置"></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;可以看出，在该框架体系中，执行策略的配置和执行尤为重要。因为该模块负责解析策略，并调用场景执行实体进行执行。此外，配置文件也是动态更新的，这就需要动态加载并且动态从Task表中拉取待执行的场景。下面讲解一下策略的读取与选择过程。</p>
<div class="IntroTitle clearfix">
  <h3 class="STYLE8 STYLE2">执行策略的读取与选择</h3>
</div>
<p class="STYLE1"><img src="../../images/media-playback-stop.png" /><span class="STYLE2"><strong>1、执行策略的读取</strong></span></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了执行顺序的有条不紊和管理的方便，我们采用1:1模式，即每台服务端的场景拉取线程每次只拉取一个待执行场景，然后锁定该场景，由执行策略分配线程解析策略，最后调执行实体执行。请看如下图：</p>
<p align="center"><img src="../../images/page/strategyread.jpg" title="执行策略读取" alt="执行策略读取" border="1" /></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;执行中心启动时，会同时启动4个模块。4个模块的首次启动顺序为：<br />
更新配置的模块 --> 场景拉取模块 --> 执行策略分配模块 --> 场景执行实体。<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;待场景执行实体启动后，更新配置定时器会每隔一段时间从库中拉取一次配置参数，且这个动作是重复的。后续每次场景执行实体模块会重复按顺序执行：场景拉取模块 --> 执行策略分配模块--> 场景执行实体模块。<br /></p>
<p class="STYLE1"><img src="../../images/media-playback-stop.png" /><span class="STYLE2"><strong>2、执行策略的自动选择过程</strong></span></p>
<p class="STYLE1">这也是该部署方式的核心模块，请看活动图：</p>
<p align="center"><img src="../../images/page/strategyselect.jpg" /></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;系统会对task表中的场景循环逐条的进行判断，优先级分别是：用户自定义场景 --> 遗留场景 --> 常规场景。</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;该模块的数据库表设计较为复杂，但也是一个亮点，感兴趣的同仁可以在 <a href="/feedback/" target="_blank">心得交流区</a> 给我留言，或者在 <a href="/contact/" target="_blank">联系方式</a> 中联系我，一起沟通交流。</p>
<div class="IntroTitle clearfix"><h3 class="STYLE8 STYLE2">外部接口说明</h3></div>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;系统还向外部提供了一些接口，方便用户或其他系统与该系统的沟通。以下讲解两大类型的接口：</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /><strong>为用户提供的接口：</strong></p><p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;View 层为为用户提供的使用接口，共有6大模块，如下图：</p><p align="center"><img src="../../images/page/viewinterface.jpg" /></p><p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;其中场景管理包括策略的配置。用户配置策略和常规执行策略均在这一模块。系统管理主要针对系统的一些重要参数做配置。</p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /><strong>为其他系统提供的接口：</strong></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;系统向外部提供service，请求由Controller处理并以xml形式返回处理结果。请求地址例如：<br />
<blockquote class="STYLE1">http://localhost:8080/phoenix-web/servletrequest.service?name=test&password=test</blockquote>
</p><p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="../../images/media-playback-stop.png" /><strong>Phoenix Framework服务端行为：</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户可以通过Phoenix Framework的服务端对用例进行调试、查看报告、场景编辑等工作。如图：</p>
<p align="center"><img src="../../images/page/phoenixuse.jpg" title="Phoenix Framework角色" alt="Phoenix Framework角色" /></p>
<p class="STYLE1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Phoenix Framework的互联网部署模式讲解完毕，如果您对内容有意见或好的建议，请在 <a href="/contact/" target="_blank"><em><strong>联系方式</strong></em></a> 联系我，或者在 <a href="/feedback/" target="_blank"><em><strong>心得交流区</strong></em></a> 提交留言，我会认真对待您给出的宝贵建议。</p>

<blockquote>
</div>


</div>
<!--content end-->

</div>
<!--main end-->
</div>
<!--right end-->
</div>
<!--inner end-->
</div>
<!--body end-->
<div class="HeightTab clearfix"></div>
<!--footer start-->
<div id="footer">
<div class="inner">
<div class='BottomNav'>
<script src='../../ads/footer.js' charset='gbk' type='text/javascript'></script>
</div>
<div class='HeightTab'></div>
<p>Copyright@2013-2015 <a href='http://www.phoenixframe.org' target='_blank'>www.phoenixframe.org</a> 版权所有 All Rights Reserved 
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1000194213'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/z_stat.php%3Fid%3D1000194213%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</p>
</div>
</div>
<!--footer end -->


</div>
<!-- JiaThis Button BEGIN -->
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?btn=r3.gif" charset="utf-8"></script>
<!-- JiaThis Button END -->
</body>
</html>




